# Specification
Specification of all related things (e.g. command of VM)

## Flags

### Size of operands in bytes

|size  |binary                                        |hex          |
|:-----|:---------------------------------------------|:------------|
|1     |`0b0001_0000__0000_0000__0000_0000__0000_0000`|`0x1000_0000`|
|2     |`0b0010_0000__0000_0000__0000_0000__0000_0000`|`0x2000_0000`|
|4     |`0b0100_0000__0000_0000__0000_0000__0000_0000`|`0x4000_0000`|

### Count of operands

|count |binary                                        |hex          |
|:-----|:---------------------------------------------|:------------|
|0     |`0b0000_0000__0000_0000__0000_0000__0000_0000`|`0x0000_0000`|
|1     |`0b0000_0001__0000_0000__0000_0000__0000_0000`|`0x0100_0000`|
|2     |`0b0000_0011__0000_0000__0000_0000__0000_0000`|`0x0300_0000`|
|3     |`0b0000_0111__0000_0000__0000_0000__0000_0000`|`0x0700_0000`|
|4     |`0b0000_1111__0000_0000__0000_0000__0000_0000`|`0x0F00_0000`|

### Direct addressing of operands

|order |binary                                        |hex          |
|:-----|:---------------------------------------------|:------------|
|1st   |`0b0000_0000__0001_0000__0000_0000__0000_0000`|`0x0010_0000`|
|2nd   |`0b0000_0000__0010_0000__0000_0000__0000_0000`|`0x0020_0000`|
|3rd   |`0b0000_0000__0100_0000__0000_0000__0000_0000`|`0x0040_0000`|
|4th   |`0b0000_0000__1000_0000__0000_0000__0000_0000`|`0x0080_0000`|

### Indirect addressing of operands

|order |binary                                        |hex          |
|:-----|:---------------------------------------------|:------------|
|1st   |`0b0000_0000__0000_0001__0000_0000__0000_0000`|`0x0001_0000`|
|2nd   |`0b0000_0000__0000_0010__0000_0000__0000_0000`|`0x0002_0000`|
|3rd   |`0b0000_0000__0000_0100__0000_0000__0000_0000`|`0x0004_0000`|
|4th   |`0b0000_0000__0000_1000__0000_0000__0000_0000`|`0x0008_0000`|

### Write access for operands

|order |binary                                        |hex          |
|:-----|:---------------------------------------------|:------------|
|1st   |`0b0000_0000__0000_0000__0001_0000__0000_0000`|`0x0000_1000`|
|2nd   |`0b0000_0000__0000_0000__0010_0000__0000_0000`|`0x0000_2000`|
|3rd   |`0b0000_0000__0000_0000__0100_0000__0000_0000`|`0x0000_4000`|
|4th   |`0b0000_0000__0000_0000__1000_0000__0000_0000`|`0x0000_8000`|

### Read access for operands

|order |binary                                        |hex          |
|:-----|:---------------------------------------------|:------------|
|1st   |`0b0000_0000__0000_0000__0000_0001__0000_0000`|`0x0000_0100`|
|2nd   |`0b0000_0000__0000_0000__0000_0010__0000_0000`|`0x0000_0200`|
|3rd   |`0b0000_0000__0000_0000__0000_0100__0000_0000`|`0x0000_0400`|
|4th   |`0b0000_0000__0000_0000__0000_1000__0000_0000`|`0x0000_0800`|

## Operation code

|mnemonic    |binary                                        |hex          |
|-----------:|:---------------------------------------------|:------------|
|__NOP__     |`0b0000_0000__0000_0000__0000_0000__0000_0000`|`0x0000_0000`|
|SYSCALL     |`0b0000_0000__0000_0000__0000_0000__0000_0001`|`0x0000_0001`|
|            |                                              |             |
|__NOT__     |`0b0000_0000__0000_0000__0000_0000__0001_0000`|`0x0000_0010`|
|AND         |`0b0000_0000__0000_0000__0000_0000__0001_0001`|`0x0000_0011`|
|OR          |`0b0000_0000__0000_0000__0000_0000__0001_0010`|`0x0000_0012`|
|XOR         |`0b0000_0000__0000_0000__0000_0000__0001_0011`|`0x0000_0013`|
|SHL         |`0b0000_0000__0000_0000__0000_0000__0001_0100`|`0x0000_0014`|
|SHR         |`0b0000_0000__0000_0000__0000_0000__0001_0101`|`0x0000_0015`|
|SAL         |`0b0000_0000__0000_0000__0000_0000__0001_0110`|`0x0000_0016`|
|SAR         |`0b0000_0000__0000_0000__0000_0000__0001_0111`|`0x0000_0017`|
|SCL         |`0b0000_0000__0000_0000__0000_0000__0001_1000`|`0x0000_0018`|
|SCR         |`0b0000_0000__0000_0000__0000_0000__0001_1001`|`0x0000_0019`|
|            |                                              |             |
|__INC__     |`0b0000_0000__0000_0000__0000_0000__0010_0000`|`0x0000_0020`|
|DEC         |`0b0000_0000__0000_0000__0000_0000__0010_0001`|`0x0000_0021`|
|IPADD       |`0b0000_0000__0000_0000__0000_0000__0010_0010`|`0x0000_0022`|
|IPSUB       |`0b0000_0000__0000_0000__0000_0000__0010_0011`|`0x0000_0023`|
|ADD         |`0b0000_0000__0000_0000__0000_0000__0010_0100`|`0x0000_0024`|
|SUB         |`0b0000_0000__0000_0000__0000_0000__0010_0101`|`0x0000_0025`|
|UMUL        |`0b0000_0000__0000_0000__0000_0000__0010_1000`|`0x0000_0028`|
|UDIV        |`0b0000_0000__0000_0000__0000_0000__0010_1001`|`0x0000_0029`|
|MUL         |`0b0000_0000__0000_0000__0000_0000__0010_1010`|`0x0000_002A`|
|DIV         |`0b0000_0000__0000_0000__0000_0000__0010_1011`|`0x0000_002B`|
|            |                                              |             |
|__CMP__     |`0b0000_0000__0000_0000__0000_0000__0011_0000`|`0x0000_0030`|
|JMP         |`0b0000_0000__0000_0000__0000_0000__0011_0001`|`0x0000_0031`|
|JE          |`0b0000_0000__0000_0000__0000_0000__0011_0010`|`0x0000_0032`|
|JNE         |`0b0000_0000__0000_0000__0000_0000__0011_0011`|`0x0000_0033`|
|JGR         |`0b0000_0000__0000_0000__0000_0000__0011_0100`|`0x0000_0034`|
|JLS         |`0b0000_0000__0000_0000__0000_0000__0011_0101`|`0x0000_0035`|
|JHG         |`0b0000_0000__0000_0000__0000_0000__0011_0110`|`0x0000_0036`|
|JLW         |`0b0000_0000__0000_0000__0000_0000__0011_0111`|`0x0000_0037`|
|            |                                              |             |
|__MOV__     |`0b0000_0000__0000_0000__0000_0000__0100_0000`|`0x0000_0040`|
|INT         |`0b0000_0000__0000_0000__0000_0000__0100_0001`|`0x0000_0041`|
|SLI         |`0b0000_0000__0000_0000__0000_0000__0100_0010`|`0x0000_0042`|
|CLI         |`0b0000_0000__0000_0000__0000_0000__0100_0011`|`0x0000_0043`|
|HLT         |`0b0000_0000__0000_0000__0000_0000__0100_1111`|`0x0000_004F`|

## Example

|asm                                    |machine words                                                |
|:--------------------------------------|:------------------------------------------------------------|
|`nop`                                  |`0x0000_0000`                                                |
|`not       0x00`                       |`0x4100_1110 0x0000_0000`                                    |
|`not       [0x00]`                     |`0x4101_1110 0x0000_0000`                                    |
|`udiv      0x00 {0x23FE} 0x04 [0x08]`  |`0x4F28_C329 0x0000_0000 0x0000_23FE 0x0000_0004 0x0000_0008`|
|`add byte  0x00 0x01 0x02`             |`0x1700_4324 0x0000_0000 0x0000_0001 0x0000_0002`            |
|`sub half  [0x34] 0x36 0x38`           |`0x2701_4325 0x0000_0034 0x0000_0036 0x0000_0038`            |